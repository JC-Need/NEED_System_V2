{% extends 'core/base.html' %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://npmcdn.com/flatpickr/dist/l10n/th.js"></script>

<div class="container py-5">
    
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold mb-0 text-dark"><i class="fas fa-user-plus me-2 text-primary"></i>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h2>
            <p class="text-muted">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡∏° (Network)</p>
        </div>
        <a href="{% url 'hr_executive_dashboard' %}" class="btn btn-light rounded-pill border shadow-sm">
            <i class="fas fa-times me-2"></i>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </a>
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        {% if form.errors %}
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle me-2"></i>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô: {{ form.errors }}
            </div>
        {% endif %}

        <div class="row g-4">
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm rounded-4 h-100">
                    <div class="card-body text-center p-4">
                        <div class="bg-light rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 100px; height: 100px;">
                            <i class="fas fa-camera fa-3x text-secondary opacity-25"></i>
                        </div>
                        <h6 class="fw-bold">‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</h6>
                        <div class="mb-4">{{ form.photo }}</div>

                        <hr>
                        <div class="text-start">
                            <label class="form-label fw-bold text-primary">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Login)</label>
                            {{ form.user }}
                            <small class="text-muted d-block mt-1">* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å User ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                
                <div class="card border-0 shadow-sm rounded-4 mb-4">
                    <div class="card-header bg-white py-3">
                        <h6 class="fw-bold m-0 text-dark"><i class="fas fa-id-card me-2"></i>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h6>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-md-2">
                                <label class="form-label fw-bold">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</label>
                                {{ form.prefix }}
                            </div>
                            <div class="col-md-5">
                                <label class="form-label fw-bold">‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á</label>
                                {{ form.first_name }}
                            </div>
                            <div class="col-md-5">
                                <label class="form-label fw-bold">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                                {{ form.last_name }}
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</label>
                                {{ form.nickname }}
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold">‡πÄ‡∏û‡∏®</label>
                                {{ form.gender }}
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</label>
                                {{ form.birth_date }}
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-bold">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                                {{ form.phone }}
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-bold">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                                {{ form.address }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm rounded-4 mb-4">
                    <div class="card-header bg-white py-3">
                        <h6 class="fw-bold m-0 text-success"><i class="fas fa-briefcase me-2"></i>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô</h6>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</label>
                                {{ form.position }}
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">‡πÅ‡∏ú‡∏ô‡∏Å</label>
                                {{ form.department }}
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥ (‡∏ö‡∏≤‡∏ó)</label>
                                {{ form.salary }}
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</label>
                                {{ form.start_date }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm rounded-4 border-start border-4 border-warning">
                    <div class="card-header bg-warning bg-opacity-10 py-3">
                        <h6 class="fw-bold m-0 text-dark"><i class="fas fa-project-diagram me-2 text-warning"></i>‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡∏° & ‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô</h6>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-12">
                                <label class="form-label fw-bold text-primary">üëë ‡∏ú‡∏π‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ / ‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡∏° (Upline)</label>
                                {{ form.introducer }}
                                <div class="form-text">‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</div>
                            </div>
                            
                            <div class="col-md-6">
                                <label class="form-label fw-bold">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (Rank)</label>
                                {{ form.business_rank }}
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô (%)</label>
                                <div class="input-group">
                                    {{ form.commission_rate }}
                                    <span class="input-group-text">%</span>
                                </div>
                            </div>

                            <div class="col-12"><hr class="text-muted opacity-25"></div>
                            
                            <div class="col-12">
                                <h6 class="fw-bold small text-muted mb-3">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô</h6>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label>
                                {{ form.bank_name }}
                            </div>
                            <div class="col-md-8">
                                <label class="form-label fw-bold">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
                                {{ form.bank_account }}
                            </div>
                        </div>

                        <div class="d-grid mt-4">
                            <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow fw-bold">
                                <i class="fas fa-save me-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#id_start_date", { dateFormat: "d/m/Y", locale: "th", allowInput: true });
        flatpickr("#id_birth_date", { dateFormat: "d/m/Y", locale: "th", allowInput: true });
    });
</script>

{% endblock %}