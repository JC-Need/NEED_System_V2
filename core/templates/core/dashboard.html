<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>CEO Dashboard - NEED System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f4f6f9; }
        .card-box { border-radius: 10px; border: none; transition: transform 0.2s; }
        .card-box:hover { transform: translateY(-5px); cursor: pointer; }
        .icon-box { font-size: 2.5rem; opacity: 0.8; }
        .menu-btn { height: 100px; display: flex; flex-direction: column; justify-content: center; align-items: center; font-weight: bold; font-size: 1.1em; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-decoration: none; color: white; transition: 0.3s; }
        .menu-btn:hover { opacity: 0.9; transform: scale(1.02); color: white; }
    </style>
</head>
<body>

    <nav class="navbar navbar-dark bg-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="#">üöÄ NEED System <small>(CEO Dashboard)</small></a>
            <div class="d-flex">
                <span class="text-white me-3 align-self-center">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, {{ user.username }}</span>
                <a href="/admin/logout/" class="btn btn-outline-light btn-sm">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </div>
        </div>
    </nav>

    <div class="container">

        <h5 class="mb-3 text-secondary"><i class="fas fa-chart-line"></i> ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ & ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h5>
        <div class="row g-3 mb-5">
            <div class="col-md-3">
                <div class="card card-box bg-primary text-white h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-title">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h6>
                            <h2 class="fw-bold">{{ sales_today|floatformat:0 }}</h2>
                            <small>‡∏ö‡∏≤‡∏ó</small>

                            <div class="mt-2">
                                <a href="{% url 'export_sales_excel' %}" class="btn btn-sm btn-light text-primary fw-bold">
                                    <i class="fas fa-file-excel"></i> ‡πÇ‡∏´‡∏•‡∏î Excel
                                </a>
                            </div>

                        </div>
                        <i class="fas fa-cash-register icon-box"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card card-box text-white h-100" style="background-color: #28a745;">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-title">‡∏Å‡∏≥‡πÑ‡∏£ (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)</h6>
                            <h3 class="fw-bold">{{ profit_month|floatformat:0 }}</h3>
                            <small class="text-white-50">‡∏£‡∏±‡∏ö {{ income_month|floatformat:0 }} | ‡∏à‡πà‡∏≤‡∏¢ {{ expense_month|floatformat:0 }}</small>
                        </div>
                        <i class="fas fa-wallet icon-box"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card card-box bg-danger text-white h-100" onclick="window.location.href='/admin/inventory/product/?stock_qty__lt=5'">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-title">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î</h6>
                            <h2 class="fw-bold">{{ low_stock_count }}</h2>
                            <small>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π)</small>
                        </div>
                        <i class="fas fa-exclamation-triangle icon-box"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card card-box bg-warning text-dark h-100" onclick="window.location.href='/admin/purchasing/purchaseorder/?status__exact=ORDERED'">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="card-title">‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (PO)</h6>
                            <h2 class="fw-bold">{{ pending_po_count }}</h2>
                            <small>‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</small>
                        </div>
                        <i class="fas fa-truck icon-box"></i>
                    </div>
                </div>
            </div>
        </div>

        <h5 class="mb-3 text-secondary"><i class="fas fa-th"></i> ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</h5>
        <div class="row g-3">

            {% if user.is_superuser or perms.sales.view_posorder %}
            <div class="col-6 col-md-3">
                <a href="{% url 'sales_dashboard' %}" class="menu-btn bg-info">
                    <i class="fas fa-cash-register fa-2x mb-2"></i>
                    ‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢ (Sales)
                </a>
            </div>
            {% endif %}

            {% if user.is_superuser or perms.inventory.view_product %}
            <div class="col-6 col-md-3">
                <a href="/admin/inventory/product/" class="menu-btn" style="background-color: #6f42c1;">
                    <i class="fas fa-boxes fa-2x mb-2"></i>
                    ‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                </a>
            </div>
            {% endif %}

            {% if user.is_superuser or perms.purchasing.view_purchaseorder %}
            <div class="col-6 col-md-3">
                <a href="/admin/purchasing/purchaseorder/" class="menu-btn" style="background-color: #fd7e14;">
                    <i class="fas fa-shopping-basket fa-2x mb-2"></i>
                    ‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠ (PO)
                </a>
            </div>
            {% endif %}

            {% if user.is_superuser or perms.manufacturing.view_productionorder %}
            <div class="col-6 col-md-3">
                <a href="/admin/manufacturing/production_order/" class="menu-btn bg-warning text-dark">
                    <i class="fas fa-industry fa-2x mb-2"></i>
                    ‡∏ù‡πà‡∏≤‡∏¢‡∏ú‡∏•‡∏¥‡∏ï
                </a>
            </div>
            {% endif %}

            {% if user.is_superuser or perms.accounting.view_income %}
            <div class="col-6 col-md-3">
                <a href="/admin/accounting/" class="menu-btn" style="background-color: #20c997;">
                    <i class="fas fa-calculator fa-2x mb-2"></i>
                    ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
                </a>
            </div>
            {% endif %}

            {% if user.is_superuser or perms.hr.view_employee %}
            <div class="col-6 col-md-3">
                <a href="/admin/hr/employee/" class="menu-btn" style="background-color: #e83e8c;">
                    <i class="fas fa-users fa-2x mb-2"></i>
                    ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
                </a>
            </div>
            {% endif %}

            {% if user.is_superuser %}
            <div class="col-6 col-md-3">
                <a href="/admin/master_data/" class="menu-btn bg-dark">
                    <i class="fas fa-database fa-2x mb-2"></i>
                    ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a href="/admin/" class="menu-btn bg-dark">
                    <i class="fas fa-cogs fa-2x mb-2"></i>
                    Admin ‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô
                </a>
            </div>
            {% endif %}
        </div>

    </div>

    <footer class="text-center mt-5 mb-3 text-muted">
        <small>¬© 2024 NEED System - All Rights Reserved.</small>
    </footer>

</body>
</html>